# ChefMate 菜谱助手

一个现代化的菜谱制作指导应用，提供直观的步骤导航和进度跟踪功能。

## 功能特性

### 🎯 菜谱步骤页面功能

#### 小步骤进度跟踪
- **自动开始**: 进入页面时自动开始第一步（牛油果），左侧小点变为绿色
- **进度标记**: 点击"下一步"按钮，完成的步骤小点中间出现对勾
- **智能切换**: 自动切换到下一个食材（番茄、洋葱等）
- **大步骤切换**: 当完成当前大步骤的最后一个食材时，自动切换到下一个大步骤的第一个食材

#### 视觉反馈
- **当前小步骤高亮**: 当前正在处理的食材组有特殊的背景高亮效果
- **小点状态变化**: 
  - 默认状态：橙色小点
  - 当前状态：绿色小点（带发光效果）
  - 完成状态：绿色小点 + 白色对勾
- **内容层次**: 非当前小步骤的操作步骤会淡化显示

#### 自动滚动优化 🆕
- **智能定位**: 每个聚焦的小步骤都会自动滚动到屏幕30%以上的位置
- **组件高度优化**: 增加了小步骤组的最小高度，确保有足够的展示空间
- **当前步骤突出**: 当前小步骤组有更大的字体和更明显的视觉效果
- **平滑滚动**: 使用平滑滚动动画，提供更好的用户体验

#### 交互方式
- **按钮控制**: 底部操作栏的"下一步"和"上一步"按钮
- **手势滑动**: 支持向上滑动前进，向下滑动后退
- **触摸优化**: 针对移动设备优化的触摸体验

### 📱 响应式设计
- 移动端优先的设计理念
- 流畅的动画过渡效果
- 直观的用户界面

### 🎨 现代化UI
- 卡片式布局
- 渐变背景
- 圆角设计
- 阴影效果

## 文件结构

```
chefmateweb/
├── css/
│   ├── font.css          # 字体样式
│   ├── style.css         # 基础样式
│   └── recipe-cooking.css # 菜谱制作页面样式
├── js/
│   ├── script.js         # 主页脚本
│   ├── recipe-detail.js  # 菜谱详情脚本
│   └── recipe-cooking.js # 菜谱制作脚本
├── images/               # 图片资源
├── index.html           # 主页
├── recipe-detail.html   # 菜谱详情页
├── recipe-cooking.html  # 菜谱制作页
├── test.html           # 测试页面
└── README.md           # 项目说明
```

## 使用方法

1. 打开 `test.html` 查看功能说明
2. 点击"打开菜谱步骤页面"进入制作流程
3. 使用底部按钮或手势滑动来导航步骤
4. 观察小点的颜色变化和进度标记
5. **重点体验**: 观察每个小步骤是否都自动滚动到屏幕30%以上的位置

## 技术实现

### 小步骤数据结构
```javascript
const stepData = [
    {
        name: "步骤1",
        subtitle: "处理食材",
        subSteps: [
            { name: "牛油果", steps: ["对半切开", "去除中间果核", ...] },
            { name: "番茄", steps: ["洗干净去掉小绿帽子", "切片", ...] },
            { name: "洋葱", steps: ["去皮", "切成细条（根据个人爱好）"] }
        ]
    },
    // ... 更多步骤
];
```

### 核心功能
- `updateSubStepDisplay()`: 更新小步骤显示状态
- `goToNextSubStep()`: 前往下一个子步骤
- `goToPrevSubStep()`: 前往上一个子步骤
- `scrollToCurrentSubStep()`: 自动滚动到当前小步骤 🆕
- 手势识别和触摸事件处理

### 自动滚动算法 🆕
```javascript
function scrollToCurrentSubStep() {
    // 计算目标滚动位置（屏幕30%位置）
    const targetPosition = containerHeight * 0.3;
    
    // 获取当前小步骤组位置
    const stepGroupTop = stepGroupRect.top - containerRect.top + stepsContainer.scrollTop;
    
    // 计算需要滚动的距离
    const desiredScrollTop = stepGroupTop - targetPosition;
    
    // 平滑滚动到目标位置
    stepsContainer.scrollTo({
        top: desiredScrollTop,
        behavior: 'smooth'
    });
}
```

## 浏览器兼容性

- Chrome 60+
- Safari 12+
- Firefox 55+
- Edge 79+

## 开发说明

项目使用原生HTML、CSS和JavaScript开发，无需额外依赖，可直接在浏览器中运行。

### 新增功能说明 🆕

#### 自动滚动功能
- 每次切换小步骤时，会自动计算目标滚动位置
- 确保当前聚焦的小步骤始终在屏幕30%以上的位置显示
- 使用平滑滚动动画，提供流畅的用户体验
- 只有当滚动距离足够大时才执行滚动，避免不必要的动画

#### 组件高度优化
- 增加了小步骤组的最小高度（120px）
- 当前小步骤组有更大的最小高度（150px）
- 增加了内边距和行高，确保内容有足够的展示空间
- 当前步骤的字体稍大，提供更好的视觉层次